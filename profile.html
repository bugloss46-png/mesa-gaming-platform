<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>try{const t=JSON.parse(localStorage.getItem('mesaSettings')||'{}').theme;if(t&&t!=='default')document.documentElement.dataset.theme=t}catch(e){}</script>
    <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å - Mesa</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body class="dashboard-body">
    <!-- Header -->
    <header class="header">
        <div class="container-fluid">
            <nav class="nav">
                <a href="dashboard.html" class="logo">MESA</a>
                <div class="nav-search">
                    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤, –∫–æ–º–∞–Ω–¥..." autocomplete="off">
                    <div class="search-results" id="searchResults"></div>
                </div>
                <div class="nav-user">
                    <div class="user-profile-header" id="userProfileToggle">
                        <div class="avatar-wrapper">
                            <img src="https://via.placeholder.com/40" alt="Avatar" class="user-avatar-small" id="headerAvatar">
                            <span class="status-dot online" id="headerStatusDot"></span>
                        </div>
                        <div class="user-info-small">
                            <span class="user-name-header" id="userNameHeader">Player</span>
                            <span class="user-level-header">–£—Ä–æ–≤–µ–Ω—å <span id="userLevelHeader">1</span></span>
                        </div>
                        <div class="profile-dropdown" id="profileDropdown">
                            <div class="dropdown-header">
                                <div class="dropdown-avatar-wrapper">
                                    <img src="https://via.placeholder.com/48" alt="Avatar" class="dropdown-avatar" id="dropdownAvatar">
                                    <span class="status-dot online" id="dropdownStatusDot"></span>
                                </div>
                                <div class="dropdown-user-info">
                                    <span class="dropdown-user-name" id="dropdownUserName">Player</span>
                                    <span class="dropdown-user-status" id="dropdownStatusText">–í —Å–µ—Ç–∏</span>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item dropdown-status-toggle" id="onlineStatusToggle">
                                <span class="dropdown-icon">üü¢</span>
                                <span>–í —Å–µ—Ç–∏</span>
                                <label class="dropdown-toggle">
                                    <input type="checkbox" id="onlineStatusCheckbox" checked>
                                    <span class="toggle-slider-mini"></span>
                                </label>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="user-profile-view.html" class="dropdown-item">
                                <span class="dropdown-icon">üìà</span> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                            </a>
                            <a href="friends.html" class="dropdown-item">
                                <span class="dropdown-icon">üë•</span> –î—Ä—É–∑—å—è
                            </a>
                            <a href="profile.html" class="dropdown-item">
                                <span class="dropdown-icon">‚úèÔ∏è</span> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                            </a>
                            <a href="settings.html" class="dropdown-item">
                                <span class="dropdown-icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-logout" id="dropdownLogout">
                                <span class="dropdown-icon">üö™</span> –í—ã–π—Ç–∏
                            </a>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <nav class="sidebar-nav">
                <a href="profile.html" class="sidebar-item active">
                    <span class="sidebar-icon">üë§</span>
                    <span class="sidebar-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </a>
                <a href="settings.html" class="sidebar-item">
                    <span class="sidebar-icon">‚öôÔ∏è</span>
                    <span class="sidebar-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <a href="index.html" class="sidebar-item logout-btn">
                    <span class="sidebar-icon">üö™</span>
                    <span class="sidebar-text">–í—ã–π—Ç–∏</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="profile-edit-page">
                <div class="profile-edit-header">
                    <h1>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h1>
                    <a href="dashboard.html" class="btn-secondary">–ù–∞–∑–∞–¥</a>
                </div>

                <!-- Card: Banner & Avatar -->
                <div class="edit-card">
                    <div class="profile-banner-edit">
                        <div class="banner-preview" id="bannerPreview">
                            <video class="banner-preview-video" id="bannerPreviewVideo" autoplay loop muted playsinline style="display:none;"></video>
                            <div class="banner-overlay">
                                <label for="bannerInput" class="banner-edit-btn">
                                    üì∑ –ò–∑–º–µ–Ω–∏—Ç—å —à–∞–ø–∫—É
                                </label>
                            </div>
                        </div>
                        <input type="file" id="bannerInput" accept="image/*,video/mp4,video/webm" hidden>
                        <div class="banner-url-input">
                            <input type="url" id="bannerUrlInput" placeholder="–ò–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ GIF / –≤–∏–¥–µ–æ..." class="banner-url-field">
                            <button type="button" class="btn-primary btn-small" id="bannerUrlApply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                        </div>
                        <div class="banner-actions">
                            <button type="button" class="btn-secondary btn-small" id="removeBanner">–°–±—Ä–æ—Å–∏—Ç—å —à–∞–ø–∫—É</button>
                        </div>
                    </div>

                    <div class="profile-avatar-edit">
                        <div class="avatar-preview-container">
                            <img src="https://via.placeholder.com/120" alt="Avatar" class="avatar-preview" id="avatarPreview">
                            <label for="avatarInput" class="avatar-edit-overlay">
                                üì∑
                            </label>
                        </div>
                        <input type="file" id="avatarInput" accept="image/*" hidden>
                        <p class="edit-hint">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∞–≤–∞—Ç–∞—Ä –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è</p>
                    </div>
                </div>

                <form id="profileForm" class="profile-edit-form">
                    <!-- Card: Main Info -->
                    <div class="edit-card">
                        <h2 class="edit-card-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                        <div class="edit-card-body">
                            <div class="form-group">
                                <label for="nickname">–ù–∏–∫–Ω–µ–π–º</label>
                                <input type="text" id="nickname" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="24" required>
                                <span class="form-hint">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è. –ú–∞–∫—Å–∏–º—É–º 24 —Å–∏–º–≤–æ–ª–∞</span>
                            </div>

                            <div class="form-group">
                                <label for="userLogin">–õ–æ–≥–∏–Ω</label>
                                <div class="login-input-wrapper">
                                    <span class="login-prefix">@</span>
                                    <input type="text" id="userLogin" placeholder="username" maxlength="20">
                                </div>
                                <span class="form-hint">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞. –õ–∞—Ç–∏–Ω–∏—Ü–∞, —Ü–∏—Ñ—Ä—ã –∏ _ (3‚Äì20 —Å–∏–º–≤–æ–ª–æ–≤)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Card: About -->
                    <div class="edit-card">
                        <h2 class="edit-card-title">–û —Å–µ–±–µ</h2>
                        <div class="edit-card-body">
                            <div class="form-group">
                                <label for="bio">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</label>
                                <textarea id="bio" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..." rows="3" maxlength="200"></textarea>
                                <span class="form-hint"><span id="bioCounter">0</span>/200</span>
                            </div>
                        </div>
                    </div>

                    <!-- Card: Hint -->
                    <div class="edit-card edit-card-hint">
                        <p class="edit-hint">–í–∏–¥–∂–µ—Ç—ã –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –Ω–∞ <a href="dashboard.html">–≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</a> —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É &#9881;</p>
                    </div>

                    <div id="formMessage" class="form-message"></div>

                    <div class="profile-edit-actions">
                        <button type="submit" class="btn-primary btn-large">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                        <a href="dashboard.html" class="btn-secondary btn-large">–û—Ç–º–µ–Ω–∞</a>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <script type="module" src="/src/profile.ts"></script>
</body>
</html>
